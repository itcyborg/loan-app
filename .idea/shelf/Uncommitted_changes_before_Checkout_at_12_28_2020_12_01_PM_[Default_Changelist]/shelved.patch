Index: app/Http/Controllers/ReportController.php
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?php\r\n\r\nnamespace App\\Http\\Controllers;\r\n\r\nuse App\\Report;\r\nuse Illuminate\\Http\\Request;\r\n\r\nclass ReportController extends Controller\r\n{\r\n    /**\r\n     * Display a listing of the resource.\r\n     *\r\n     * @return \\Illuminate\\Http\\Response\r\n     */\r\n    public function index()\r\n    {\r\n        //\r\n    }\r\n\r\n    /**\r\n     * Show the form for creating a new resource.\r\n     *\r\n     * @return \\Illuminate\\Http\\Response\r\n     */\r\n    public function create()\r\n    {\r\n        //\r\n    }\r\n\r\n    /**\r\n     * Store a newly created resource in storage.\r\n     *\r\n     * @param  \\Illuminate\\Http\\Request  $request\r\n     * @return \\Illuminate\\Http\\Response\r\n     */\r\n    public function store(Request $request)\r\n    {\r\n        //\r\n    }\r\n\r\n    /**\r\n     * Display the specified resource.\r\n     *\r\n     * @param  \\App\\Report  $report\r\n     * @return \\Illuminate\\Http\\Response\r\n     */\r\n    public function show(Report $report)\r\n    {\r\n        //\r\n    }\r\n\r\n    /**\r\n     * Show the form for editing the specified resource.\r\n     *\r\n     * @param  \\App\\Report  $report\r\n     * @return \\Illuminate\\Http\\Response\r\n     */\r\n    public function edit(Report $report)\r\n    {\r\n        //\r\n    }\r\n\r\n    /**\r\n     * Update the specified resource in storage.\r\n     *\r\n     * @param  \\Illuminate\\Http\\Request  $request\r\n     * @param  \\App\\Report  $report\r\n     * @return \\Illuminate\\Http\\Response\r\n     */\r\n    public function update(Request $request, Report $report)\r\n    {\r\n        //\r\n    }\r\n\r\n    /**\r\n     * Remove the specified resource from storage.\r\n     *\r\n     * @param  \\App\\Report  $report\r\n     * @return \\Illuminate\\Http\\Response\r\n     */\r\n    public function destroy(Report $report)\r\n    {\r\n        //\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/Http/Controllers/ReportController.php b/app/Http/Controllers/ReportController.php
--- a/app/Http/Controllers/ReportController.php	(revision 6369905fa625338504d0e7f1b2cb2164e8c80cf1)
+++ b/app/Http/Controllers/ReportController.php	(date 1609145430770)
@@ -2,7 +2,10 @@
 
 namespace App\Http\Controllers;
 
+use App\LoanApplication;
+use App\Product;
 use App\Report;
+use App\User;
 use Illuminate\Http\Request;
 
 class ReportController extends Controller
@@ -10,11 +13,11 @@
     /**
      * Display a listing of the resource.
      *
-     * @return \Illuminate\Http\Response
+     * @return \Illuminate\Contracts\Foundation\Application|\Illuminate\Contracts\View\Factory|\Illuminate\Http\Response|\Illuminate\View\View
      */
     public function index()
     {
-        //
+        return view('reports.reports');
     }
 
     /**
@@ -82,4 +85,45 @@
     {
         //
     }
+
+    public function getData(Request $request)
+    {
+        $disbursements=LoanApplication::with('product')
+            ->groupBy('product_id')
+            ->where('status','DISBURSED')
+            ->selectRaw('sum(amount_approved) as amount_approved_sum,sum(amount_applied) as amount_applied_sum,product_id')
+            ->get();
+        $principals=LoanApplication::with('product')
+            ->groupBy('product_id')
+            ->where('status','APPROVED')
+            ->orWhere('status','DISBURSED')
+            ->selectRaw('sum(amount_approved) as amount_approved_sum,sum(amount_applied) as amount_applied_sum,product_id')
+            ->get();
+        $interest=LoanApplication::with('product')
+            ->groupBy('product_id')
+            ->where('status','APPROVED')
+            ->orWhere('status','DISBURSED')
+            ->selectRaw('sum(total_interest) as total_interest,product_id')
+            ->get();
+        return ['disbursement'=>$disbursements,'principals'=>$principals,'interest'=>$interest];
+    }
+
+    public function getAgentReports(Request $request)
+    {
+//        $this->validate($request,[
+//           'agent_id'=>'required',
+//        ]);
+
+        /**
+         * Steps
+         * 1. get the summary of each agent
+         * 2. get the details of each agent
+         */
+
+        // step 1
+        $interest=LoanApplication::with(['product','user','officer'])->get();
+        $agents=User::all();
+        $products=Product::all();
+        return json_encode(['reports'=>$interest,'products'=>$products,'agents'=>$agents,'loan_officers'=>$agents]);
+    }
 }
