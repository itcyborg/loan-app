Index: app/Http/Controllers/ReportController.php
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?php\r\n\r\nnamespace App\\Http\\Controllers;\r\n\r\nuse App\\LoanApplication;\r\nuse App\\Product;\r\nuse App\\Report;\r\nuse App\\User;\r\nuse Illuminate\\Http\\Request;\r\n\r\nclass ReportController extends Controller\r\n{\r\n    /**\r\n     * Display a listing of the resource.\r\n     *\r\n     * @return \\Illuminate\\Contracts\\Foundation\\Application|\\Illuminate\\Contracts\\View\\Factory|\\Illuminate\\Http\\Response|\\Illuminate\\View\\View\r\n     */\r\n    public function index()\r\n    {\r\n        return view('reports.reports');\r\n    }\r\n\r\n    /**\r\n     * Show the form for creating a new resource.\r\n     *\r\n     * @return \\Illuminate\\Http\\Response\r\n     */\r\n    public function create()\r\n    {\r\n        //\r\n    }\r\n\r\n    /**\r\n     * Store a newly created resource in storage.\r\n     *\r\n     * @param  \\Illuminate\\Http\\Request  $request\r\n     * @return \\Illuminate\\Http\\Response\r\n     */\r\n    public function store(Request $request)\r\n    {\r\n        //\r\n    }\r\n\r\n    /**\r\n     * Display the specified resource.\r\n     *\r\n     * @param  \\App\\Report  $report\r\n     * @return \\Illuminate\\Http\\Response\r\n     */\r\n    public function show(Report $report)\r\n    {\r\n        //\r\n    }\r\n\r\n    /**\r\n     * Show the form for editing the specified resource.\r\n     *\r\n     * @param  \\App\\Report  $report\r\n     * @return \\Illuminate\\Http\\Response\r\n     */\r\n    public function edit(Report $report)\r\n    {\r\n        //\r\n    }\r\n\r\n    /**\r\n     * Update the specified resource in storage.\r\n     *\r\n     * @param  \\Illuminate\\Http\\Request  $request\r\n     * @param  \\App\\Report  $report\r\n     * @return \\Illuminate\\Http\\Response\r\n     */\r\n    public function update(Request $request, Report $report)\r\n    {\r\n        //\r\n    }\r\n\r\n    /**\r\n     * Remove the specified resource from storage.\r\n     *\r\n     * @param  \\App\\Report  $report\r\n     * @return \\Illuminate\\Http\\Response\r\n     */\r\n    public function destroy(Report $report)\r\n    {\r\n        //\r\n    }\r\n\r\n    public function getData(Request $request)\r\n    {\r\n        $disbursements=LoanApplication::with('product')\r\n            ->groupBy('product_id')\r\n            ->where('status','DISBURSED')\r\n            ->selectRaw('sum(amount_approved) as amount_approved_sum,sum(amount_applied) as amount_applied_sum,product_id')\r\n            ->get();\r\n        $principals=LoanApplication::with('product')\r\n            ->groupBy('product_id')\r\n            ->where('status','APPROVED')\r\n            ->orWhere('status','DISBURSED')\r\n            ->selectRaw('sum(amount_approved) as amount_approved_sum,sum(amount_applied) as amount_applied_sum,product_id')\r\n            ->get();\r\n        $interest=LoanApplication::with('product')\r\n            ->groupBy('product_id')\r\n            ->where('status','APPROVED')\r\n            ->orWhere('status','DISBURSED')\r\n            ->selectRaw('sum(total_interest) as total_interest,product_id')\r\n            ->get();\r\n        return ['disbursement'=>$disbursements,'principals'=>$principals,'interest'=>$interest];\r\n    }\r\n\r\n    public function getAgentReports(Request $request)\r\n    {\r\n//        $this->validate($request,[\r\n//           'agent_id'=>'required',\r\n//        ]);\r\n\r\n        /**\r\n         * Steps\r\n         * 1. get the summary of each agent\r\n         * 2. get the details of each agent\r\n         */\r\n\r\n        // step 1\r\n        $interest=LoanApplication::with(['product','user','officer'])->get();\r\n        $agents=User::all();\r\n        $products=Product::all();\r\n        return json_encode(['reports'=>$interest,'products'=>$products,'agents'=>$agents,'loan_officers'=>$agents]);\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/Http/Controllers/ReportController.php b/app/Http/Controllers/ReportController.php
--- a/app/Http/Controllers/ReportController.php	(revision 4765897567960eaff9a68e9fd4eecfc40c383ad8)
+++ b/app/Http/Controllers/ReportController.php	(date 1609139304324)
@@ -110,10 +110,6 @@
 
     public function getAgentReports(Request $request)
     {
-//        $this->validate($request,[
-//           'agent_id'=>'required',
-//        ]);
-
         /**
          * Steps
          * 1. get the summary of each agent
